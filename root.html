<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{{ title }}thinliquid's catppuccin heaven</title>
    <meta name="description" content="{{ description }}">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">

    {{ external-styles }}

    <!-- prettier-ignore -->
    <style>/* styles */</style>
  </head>
  <body>
    <div id="container">
      <folders>
        <a href="#" onclick="window.open('https://thnlqd.atabook.org')">
          <img src="/icons/Contacts.svg" width="64" height="64" alt="Guestbook" />
          <folder-name>Guestbook</folder-name>
        </a>
        <a href="#" onclick="window.open('https://nekoweb.org/follow/thnlqd')">
          <img src="/icons/Grapher.svg" width="64" height="64" alt="Guestbook" />
          <folder-name>Follow my Nekoweb</folder-name>
        </a>
        <a href="/">
          <img src="/icons/Folder.svg" width="64" height="64" alt="Folder" />
          <folder-name>Home</folder-name>
        </a>
        <a href="/buttons-galore">
          <img src="/icons/Folder.svg" width="64" height="64" alt="Folder" />
          <folder-name>Buttons Galore</folder-name>
        </a>
        <a href="/hall-of-fame">
          <img src="/icons/Folder.svg" width="64" height="64" alt="Folder" />
          <folder-name>Hall of Fame</folder-name>
        </a>
        <a href="/webrings">
          <img src="/icons/Folder.svg" width="64" height="64" alt="Folder" />
          <folder-name>Webrings</folder-name>
        </a>
      </folders>

      <script>
        document.querySelectorAll('folders a').forEach((folder) => {
          folder.ondblclick = folder.onclick
          folder.onclick = (e) => {
            e.preventDefault();
          }

          if (folder.ondblclick == null) {
            folder.ondblclick = (e) => {
              window.location.href = folder.href;
            }
          }
        });
      </script>
      
      <window>
        <window-titlebar>
          <window-controls>
            <window-control type="close"></window-control>
            <window-control type="minimize"></window-control>
            <window-control type="maximize"></window-control>
          </window-controls>
          <window-title>
            {{ page-title }}
          </window-title>
        </window-titlebar>
        <window-content>
          {{ content }}

          <div id="commit">
            üè∑
            <a href="#" onclick="window.open('https://github.com/ThinLiquid/site/commit/{{ commit-hash }}')">
              {{ commit-hash-short }}
            </a>
            <small style="margin-top:5px;display:block;">{{ commit-message }}</small>
          </div>
        </window-content>
      </window>
    </div>

    <script type="module">
      import { ModPlayer } from 'https://atornblad.se/files/js-mod-player/player.js';
      const audio = new AudioContext();
      const player = new ModPlayer(audio);

      const songs = [
        'gemini-bleeps.mod',
        'tempest-acidjazz.mod',
        'unsuspected_h.mod'
      ]
      await player.load('/audio/' + songs[Math.floor(Math.random() * songs.length)]);

      new Audio().play().catch(error => {
        if (error.message.includes('interact')) {
          window.addEventListener('click', async () => {
            player.play();
          });
        }
      });

      player.play()

      player.watchRows((pos, row) => {
        if ((row % 8) === 0) {
          flash()
        }
      });

      const flash = () => {
        
      }
    </script>
  </body>
</html>